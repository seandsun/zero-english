---
import type { CollectionEntry } from 'astro:content';
import { getCollection, render } from 'astro:content';
import Layout from '@/layouts/Layout.astro';
import Section from '@/components/english/Section.astro';
import ButtonGoBack from '@/components/ui/ButtonGoBack.astro';
import Icon from '@/components/icons/icon.astro';

export async function getStaticPaths() {
  const topics: CollectionEntry<'english'>[] = await getCollection('english');

  return topics.map((topic) => ({
    params: { slug: topic.slug },
    props: { topic },
  }));
}

const { topic } = Astro.props;
const { data } = topic;
const { title, description } = data;

const { Content } = await render(topic);
---

<Layout title={title} description={description}>
  <Section>
    <h1 class="max-w-3xl px-6 md:px-12">{title}</h1>
    <Content />
    <div
      class="fixed left-1 bottom-6 xl:top-1/2 xl:-translate-y-1/2 xl:left-32 xl:bottom-auto"
    >
      <ButtonGoBack
        class="cursor-pointer"
        size="sm"
        aria-label="Back to topics"
      >
        <Fragment slot="iconLeft">
          <Icon class="size-5" name="arrowLeft" />
        </Fragment>
        <span class="hidden lg:inline-block">Topics</span>
      </ButtonGoBack>
    </div>
  </Section>
</Layout>
